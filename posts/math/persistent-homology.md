---
title: ねこでも分かるパーシステントホモロジー
published:
tags: Topology, Homology, PersistentHomology
toc: on
mathjax: on
---

<!--more-->

{toc}


## ホモロジー

パーシステントホモロジーはホモロジーの一種です. ホモロジーが何なのかは以前記事を書きましたのでそれをご参照ください.

[ねこでも分かるホモロジー](/posts/math/what-is-homology.html)

ここでも少しだけホモロジーの意味を確認しておきましょう. ただしここでは位相空間 $A$ に対して各 $H_*(A)$ がベクトル空間であるようなホモロジーを考えることにします.

- $\dim H_0(A)$ は $A$ の連結成分の数
- $\dim H_1(A)$ は $A$ の1次元の穴の数
- $\dim H_2(A)$ は $A$ の2次元の穴の数
- $\dim H_n(A)$ は $A$ の$n$次元の穴の数



## パーシステントホモロジー

### データにホモロジーを適用してみる

データ点はある位相空間上の点であるとします. 例えば2次元ユークリッド空間 $\mathbb{R}^2$ 内の散布図を考えているような感じです. データ(=データ点の集合)を $A$ とし, データ点の個数を $N$ とします.

まずは単純にデータ点の集合にホモロジーを適用することを考えてみます.

データ点は離散的なので, 1次元以上の穴を持ちません. つまり $i \geq 1$ に対して $\dim H_i(A) = 0$ です. また $\dim H_0(A) = N$ ですね.

これは, ホモロジーがなんの情報も与えてくれないことを意味します.

### アイデア

ではどうしたらよいのでしょうか. データが離散点の集合であることが問題なのですから, 各データ点を太らせればいいですね！ これがパーシステントホモロジーのアイデアです.

以下のような散布図を具体例にとってこのアイデアを説明していきます.

![](/images/scatters/scatter.jpg)

各点を少しずつ太らしていって, その様子を観察していきます.

![](/images/scatters/scatter2.jpg)

少しだけ太らせてみました. とくに穴ができたわけでもなく, 連結成分の個数にも変化はありません. そういえば最近タピオカ屋さんが乱立してますね.

![](/images/scatters/scatter3.jpg)

もう少し太らせてみます. すると円同士が重なるところがでてきました. 連結成分の個数が減少したということですね.

![](/images/scatters/scatter4.jpg)

さらに太らせると. 輪っかが出来上がります. これで $\dim H_1$ が $0$ ではなくなりました.

![](/images/scatters/scatter5.jpg)

円が2つできました. ミスタードーナツ感がありますね.

![](/images/scatters/scatter6.jpg)

さらに続けると, 小さい方の輪っかが消えました.

最終的には大きいほうの輪っかも埋まることが想像できますね. それ以降はどれだけ点を太らせていっても, 連結成分や輪っかの個数に変化はありません.


## パーシステント図

各円の半径 $r$ を時間に見立て, いつ輪っかが発生・消滅したかをプロットしたものを, パーシステント図といいます.

一般に $n$ 次元のデータを考えた場合, $n-1$ 次元までの輪っかが発生する可能性があります. $k$ 次元の輪っかの発生と消滅をプロットしたものを, $k$ 次パースステント図などと呼びます.

今回の場合でいうと, 1次元の輪っかが大小2つできました. それらが発生・消滅したときの $r$ の値が以下のようであったとします.

| 1次元の輪っか | 発生時の $r$ | 消滅時の $r$ |
|:------------|------------:|------------:|
|小           |            2|             4|
|大           |            3|             7|

この場合「1次のパーシステント図」は以下のようになります.

<!--図を入れる-->

パーシステント図は以下のような特徴を持ちます.

- もとのデータが高次元に住んでいても, パーシステント図は2次元で表現される.
- $n$ 次パーシステント図の点の数は, データ点を太らせていく過程で発生した $n$ 次元の穴の総数と等しい.
- 発生時刻よりも消滅時刻のほうが遅いため, すべての点は対角線よりも上側に存在する.

輪っかの存続時間(消滅時の $r$ $-$ 発生時の $r$)のことをパーシステンスといいます. これはパーシステント図でいうと, 以下のような距離に対応します.

<!--図-->

### パーシステント図の特徴

パーシステント図にどんな意味があるのかというと, データの要約です.

データの要約は, 2つのデータを区別するために使われますね. 平均値は代表的な要約統計量ですが, 2つのデータの平均値が大きく異なれば, 2つのデータは*別物*だと結論付けられます.

パーシステント図も同様です. パーシステント図が大きく異なれば, もとのデータも*別物*だと判断できます.

このような使い方をするには, 「似たようなデータからは似たようなパーシステント図が得られる」という性質を備えていることが必要です.

例えば上に挙げた散布図の例で考えてみます. データ点のひとつを少しずらしたとしても, 輪っかの発生時刻と消滅時刻もそんなに変化しなさそうなことが想像できます.
